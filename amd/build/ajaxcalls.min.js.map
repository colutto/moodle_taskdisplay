{"version":3,"sources":["../src/ajaxcalls.js"],"names":["get_chart_data","connection","ajax","call","methodname","args","fail","notification","exception","then","data","convertAJAXData","userData","studentsData","supportFunct","renewDiv","chartholder","d3","select","mychart","d3x3d","chart","barChartMultiSeries","datum","window","x3dom","reload","key","course","assignmentsUser","assignmentsStudents","index","assignmentName","assignments","value","is_submitted","push","value2","totalSubmissions","number_of_users","unshift","course_name","values"],"mappings":"qjBAAA,OACA,OACA,OACA,OACA,O,kgDACO,QAASA,CAAAA,CAAT,EAAyB,CAC5B,GAAIC,CAAAA,CAAU,CAAGC,CAAI,CAACC,IAAL,CAAU,CAAC,CACxBC,UAAU,CAAE,4BADY,CAExBC,IAAI,CAAE,EAFkB,CAGxBC,IAAI,CAAEC,CAAY,CAACC,SAHK,CAAD,CAAV,CAAjB,CAKAP,CAAU,CAAC,CAAD,CAAV,CAAcQ,IAAd,CAAmB,SAASC,CAAT,CAAc,OACGC,CAAe,CAACD,CAAD,CADlB,UACvBE,CADuB,MACbC,CADa,MAE7BC,CAAY,CAACC,QAAb,CAAsB,aAAtB,EAF6B,GAGzBC,CAAAA,CAAW,CAAGC,CAAE,CAACC,MAAH,CAAU,cAAV,CAHW,CAIzBC,CAAO,CAAGC,CAAK,CAACC,KAAN,CAAYC,mBAAZ,EAJe,CAK7BN,CAAW,CAACO,KAAZ,CAAkBX,CAAlB,EAA4BT,IAA5B,CAAiCgB,CAAjC,EACAL,CAAY,CAACC,QAAb,CAAsB,cAAtB,EAN6B,GAOzBC,CAAAA,CAAW,CAAGC,CAAE,CAACC,MAAH,CAAU,eAAV,CAPW,CAQzBC,CAAO,CAAGC,CAAK,CAACC,KAAN,CAAYC,mBAAZ,EARe,CAS7BN,CAAW,CAACO,KAAZ,CAAkBV,CAAlB,EAAgCV,IAAhC,CAAqCgB,CAArC,EACAK,MAAM,CAACC,KAAP,CAAaC,MAAb,EACH,CAXD,CAYH,CACM,QAASf,CAAAA,CAAT,CAAyBD,CAAzB,CAA8B,IAC7BE,CAAAA,CAAQ,CAAG,EADkB,CAE7BC,CAAY,CAAG,EAFc,CAGjC,IAAI,GAAIc,CAAAA,CAAR,GAAejB,CAAAA,CAAf,CAAoB,IACZkB,CAAAA,CAAM,CAAGlB,CAAI,CAACiB,CAAD,CADD,CAEZE,CAAe,CAAG,EAFN,CAGZC,CAAmB,CAAG,EAHV,CAIZC,CAAK,CAAG,CAJI,CAKhB,IAAI,GAAIC,CAAAA,CAAR,GAA0BJ,CAAAA,CAAM,CAACK,WAAjC,CAA6C,CACzC,GAAIC,CAAAA,CAAK,CAAGN,CAAM,CAACK,WAAP,CAAmBD,CAAnB,EAAmCG,YAA/C,CACAN,CAAe,CAACO,IAAhB,CAAqB,CAACT,GAAG,CAAC,KAAKI,CAAV,CAAiBG,KAAK,CAAEA,CAAxB,CAArB,EACA,GAAIG,CAAAA,CAAM,CAAoF,GAAjF,EAACT,CAAM,CAACK,WAAP,CAAmBD,CAAnB,EAAmCM,gBAAnC,CAAsDV,CAAM,CAACW,eAA9D,CAAb,CACAT,CAAmB,CAACM,IAApB,CAAyB,CAACT,GAAG,CAAC,KAAKI,CAAV,CAAiBG,KAAK,CAAEG,CAAxB,CAAzB,EACAN,CAAK,EAAI,CACZ,CACDnB,CAAQ,CAAC4B,OAAT,CAAiB,CAACb,GAAG,CAACC,CAAM,CAACa,WAAZ,CAAyBC,MAAM,CAACb,CAAhC,CAAjB,EACAhB,CAAY,CAAC2B,OAAb,CAAqB,CAACb,GAAG,CAACC,CAAM,CAACa,WAAZ,CAAyBC,MAAM,CAACZ,CAAhC,CAArB,CACH,CACD,MAAM,CAAClB,CAAD,CAAWC,CAAX,CACT,C","sourcesContent":["import * as ajax from 'core/ajax';\nimport * as notification from 'core/notification';\nimport * as d3 from './d3-x3d_library/d3';\nimport * as d3x3d from './d3-x3d_library/d3-x3d';\nimport * as supportFunct from './supportFunctions';\nexport function get_chart_data(){\n    var connection = ajax.call([{\n        methodname: 'block_taskdisplay_loaddata',\n        args: {},\n        fail: notification.exception,\n    }]);\n    connection[0].then(function(data){\n        const[userData, studentsData] = convertAJAXData(data);\n        supportFunct.renewDiv('chartholder');\n        var chartholder = d3.select('#chartholder');\n        var mychart = d3x3d.chart.barChartMultiSeries();\n        chartholder.datum(userData).call(mychart);\n        supportFunct.renewDiv('chartholder2');\n        var chartholder = d3.select('#chartholder2');\n        var mychart = d3x3d.chart.barChartMultiSeries();\n        chartholder.datum(studentsData).call(mychart);\n        window.x3dom.reload();\n    });\n}\nexport function convertAJAXData(data){\n    var userData = [];\n    var studentsData = [];\n    for(var key in data){\n        var course = data[key];\n        var assignmentsUser = [];\n        var assignmentsStudents = [];\n        var index = 1;\n        for(var assignmentName in course.assignments){\n            var value = course.assignments[assignmentName].is_submitted;\n            assignmentsUser.push({key:'EA'+index, value: value});\n            var value2 = (course.assignments[assignmentName].totalSubmissions / course.number_of_users) * 100;\n            assignmentsStudents.push({key:'EA'+index, value: value2});\n            index += 1;\n        }\n        userData.unshift({key:course.course_name, values:assignmentsUser});\n        studentsData.unshift({key:course.course_name, values:assignmentsStudents});\n    }\n    return[userData, studentsData];\n}"],"file":"ajaxcalls.min.js"}