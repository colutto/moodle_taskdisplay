{"version":3,"sources":["../src/ajaxcalls.js"],"names":["get_chart_data","connection","ajax","call","methodname","args","fail","notification","exception","then","data","my_data","convertAJAXData","supportFunct","renewDiv","chartholder","d3","select","mychart","d3x3d","chart","bubbleChart","datum","window","x3dom","reload","key","course","values_assignments","index","noAssignments","assignment_key","assignments","assignment","is_submitted","push","value","unshift","course_name","values"],"mappings":"qjBAAA,OACA,OACA,OACA,OACA,O,siBACO,QAASA,CAAAA,CAAT,EAAyB,CAC5B,GAAIC,CAAAA,CAAU,CAAGC,CAAI,CAACC,IAAL,CAAU,CAAC,CACxBC,UAAU,CAAE,4BADY,CAExBC,IAAI,CAAE,EAFkB,CAGxBC,IAAI,CAAEC,CAAY,CAACC,SAHK,CAAD,CAAV,CAAjB,CAKAP,CAAU,CAAC,CAAD,CAAV,CAAcQ,IAAd,CAAmB,SAASC,CAAT,CAAc,CAC7B,GAAIC,CAAAA,CAAO,CAAGC,CAAe,CAACF,CAAD,CAA7B,CACAG,CAAY,CAACC,QAAb,CAAsB,aAAtB,EAF6B,GAGzBC,CAAAA,CAAW,CAAGC,CAAE,CAACC,MAAH,CAAU,cAAV,CAHW,CAIzBC,CAAO,CAAGC,CAAK,CAACC,KAAN,CAAYC,WAAZ,EAJe,CAK7BN,CAAW,CAACO,KAAZ,CAAkBX,CAAlB,EAA2BR,IAA3B,CAAgCe,CAAhC,EACAK,MAAM,CAACC,KAAP,CAAaC,MAAb,EACH,CAPD,CAQH,CAEM,QAASb,CAAAA,CAAT,CAAyBF,CAAzB,CAA8B,CACjC,GAAIC,CAAAA,CAAO,CAAG,EAAd,CACA,IAAI,GAAIe,CAAAA,CAAR,GAAehB,CAAAA,CAAf,CAAqB,IACbiB,CAAAA,CAAM,CAAGjB,CAAI,CAACgB,CAAD,CADA,CAEbE,CAAkB,CAAG,EAFR,CAGbC,CAAK,CAAG,CAHK,CAIjB,GAAG,CAACF,CAAM,CAACG,aAAX,CAAyB,CACrB,IAAI,GAAIC,CAAAA,CAAR,GAA0BJ,CAAAA,CAAM,CAACK,WAAjC,CAA6C,CACzC,GAAIC,CAAAA,CAAU,CAAGN,CAAM,CAACK,WAAP,CAAmBD,CAAnB,CAAjB,CACA,GAA8B,WAA3B,EAAAE,CAAU,CAACC,YAAd,CAA0C,CACtCN,CAAkB,CAACO,IAAnB,CAAwB,CAACT,GAAG,CAAE,KAAKG,CAAX,CAAkBO,KAAK,CAAE,GAAzB,CAAxB,CACH,CAFD,IAEK,CACDR,CAAkB,CAACO,IAAnB,CAAwB,CAACT,GAAG,CAAE,KAAKG,CAAX,CAAkBO,KAAK,CAAE,CAAzB,CAAxB,CACH,CACDP,CAAK,EACR,CACJ,CAVD,IAUM,CACFD,CAAkB,CAACO,IAAnB,CAAwB,CAACT,GAAG,CAAE,KAAKG,CAAX,CAAkBO,KAAK,CAAE,CAAzB,CAAxB,CACH,CACDzB,CAAO,CAAC0B,OAAR,CAAgB,CAACX,GAAG,CAAEC,CAAM,CAACW,WAAb,CAA0BC,MAAM,CAAEX,CAAlC,CAAhB,CACH,CACD,MAAOjB,CAAAA,CACV,C","sourcesContent":["import * as ajax from 'core/ajax';\nimport * as notification from 'core/notification';\nimport * as d3 from './d3-x3d_library/d3';\nimport * as d3x3d from './d3-x3d_library/d3-x3d';\nimport * as supportFunct from './supportFunctions';\nexport function get_chart_data(){\n    var connection = ajax.call([{\n        methodname: 'block_taskdisplay_loaddata',\n        args: {},\n        fail: notification.exception,\n    }]);\n    connection[0].then(function(data){\n        var my_data = convertAJAXData(data);\n        supportFunct.renewDiv('chartholder');\n        var chartholder = d3.select('#chartholder');\n        var mychart = d3x3d.chart.bubbleChart();\n        chartholder.datum(my_data).call(mychart);\n        window.x3dom.reload();\n    });\n}\n\nexport function convertAJAXData(data){\n    var my_data = [];\n    for(var key in data) {\n        var course = data[key];\n        var values_assignments = [];\n        var index = 1;\n        if(!course.noAssignments){\n            for(var assignment_key in course.assignments){\n                var assignment = course.assignments[assignment_key];\n                if(assignment.is_submitted == 'submitted'){\n                    values_assignments.push({key: 'EA'+index, value: 100});\n                }else{\n                    values_assignments.push({key: 'EA'+index, value: 0});\n                }\n                index++;\n            }\n        } else{\n            values_assignments.push({key: 'EA'+index, value: 0});\n        }\n        my_data.unshift({key: course.course_name, values: values_assignments});\n    }\n    return my_data;\n}"],"file":"ajaxcalls.min.js"}